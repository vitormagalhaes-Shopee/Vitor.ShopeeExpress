<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Shopee Express | Ops Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<style>
body { font-family: Inter, sans-serif; background:#F6F8FC; }
.card {
  background:#fff;
  border-radius:14px;
  border:1px solid #E5E7EB;
  box-shadow:0 6px 14px rgba(0,0,0,.04);
}
</style>
</head>

<body class="text-gray-800">

<main class="max-w-[1400px] mx-auto p-6 space-y-6">

<!-- EVOLUÇÃO -->
<div class="card p-6">
  <h3 class="font-bold mb-3">Evolução da Frota – Últimos 7 Dias</h3>
  <canvas id="chart-evolution" height="80"></canvas>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

<div class="card p-6">
  <h3 class="font-bold mb-3">Volume por Perfil de Veículo</h3>
  <canvas id="chart-perfil"></canvas>
</div>

<div class="card p-6">
  <h3 class="font-bold mb-3">Top 5 Transportadoras</h3>
  <canvas id="chart-transp"></canvas>
</div>

<div class="card p-6">
  <h3 class="font-bold mb-3">Distribuição de Frota por Modal</h3>
  <canvas id="chart-modal"></canvas>
</div>

<div class="card p-6">
  <h3 class="font-bold mb-3">AM x DDP – Volume</h3>
  <canvas id="chart-ciclo"></canvas>
</div>

</div>
</main>

<script>
Chart.register(ChartDataLabels);

const ALLOWED = ['VUC','PASSEIO','MOTO','VAN','FIORINO','VAN/KOMBI','UTILITÁRIO'];

function barConfig(labels, data, horizontal=false){
  return {
    type:'bar',
    data:{ labels, datasets:[{
      data,
      backgroundColor: data.map(v=>`rgba(0,0,0,${0.4 + v/Math.max(...data)*0.6})`)
    }]},
    options:{
      indexAxis: horizontal?'y':'x',
      plugins:{
        legend:{display:false},
        datalabels:{
          color:'#000',
          anchor:'end',
          align:'top',
          font:{weight:'bold'}
        }
      },
      scales:{ x:{grid:{display:false}}, y:{grid:{display:false}} }
    }
  };
}

/* EXEMPLO DE DADOS (ligar ao seu raw atual) */
const last7 = ['27/01','28/01','29/01','30/01','31/01','01/02','02/02'];
const evo = [80,120,95,150,110,140,90];

new Chart(chart-evolution,{
  type:'line',
  data:{ labels:last7, datasets:[{
    data:evo,
    borderColor:'#000',
    pointBackgroundColor:'#2563EB',
    tension:.3
  }]},
  options:{
    plugins:{
      legend:{display:false},
      datalabels:{
        align:'top',
        color:'#000',
        font:{weight:'bold'}
      }
    }
  }
});

new Chart(chart-perfil, barConfig(
  ALLOWED,
  [12000,10500,1800,2300,900,700,1600]
));

new Chart(chart-transp, barConfig(
  ['GUEDES','PRALOG','VERSANI','PARCEIROSPOT','DELUNA'],
  [9800,5200,4600,3900,3100]
));

new Chart(chart-modal, barConfig(
  ALLOWED,
  [12000,10500,1800,2300,900,700,1600],
  true
));

new Chart(chart-ciclo, barConfig(
  ['AM','DDP'],
  [23000,5400]
));
</script>

</body>
</html>
